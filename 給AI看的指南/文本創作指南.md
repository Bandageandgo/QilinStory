## **遊戲敘事設計準則 (V1.0)**

**文件目的：** 本文件旨在定義遊戲的核心世界觀、敘事架構與風格基調，作為AI進行後續劇情、任務、角色及對白創作時必須遵循的指導原則，以確保遊戲體驗的連貫性、深度與獨特性。

### **第一層：上層設計 - 世界觀、核心哲學與基調 (Worldview, Core Philosophy & Tone)**

此層級定義了遊戲世界的基礎規則、核心衝突的本質，以及玩家體驗的宏觀框架。

1.  **核心哲學衝突：命定論 vs. 命未定論 (Determinism vs. Indeterminism)**
    *   **核心叩問：** 命運是否註定？個體意志與努力能否改變宿命軌跡？
    *   **「逆天改命」：**
        *   核心驅動力，對抗來自個人命局、社會規則、歷史慣性、甚至更高維度存在的宿命力量。
        *   強調其**艱難性**與**代價**。改命需要巨大努力、犧牲，並可能引發不可預料的後果。
        *   代價形式多樣：有形（失去物質、夥伴、健康）與無形（承受誤解、罪惡感、扭曲自我）。
    *   **「命」的層次：** 體現在宏觀（世界走向）與微觀（個人命運）兩個層面。

2.  **主角核心旅程：饕餮之命 vs. 異麒麟之路 (Nature vs. Nurture, Transformation)**
    *   **「饕餮之命局」：** 主角天生的內在詛咒與力量源泉，表現為更易陷入「貪婪」（資源、力量、衝動）。是核心劇情與可能的機制點。
    *   **轉化而非消除：** 主角的核心掙扎在於**掌控並轉化**饕餮之力，而非根除。目標是將其導向「善」途（如為守護而渴求）。
    *   **「異麒麟」象徵：** 最終的理想狀態。承認黑暗本源（饕餮本質未變），但通過選擇與行為，實現了近似「麒麟」的正面影響力。體現了個體層面的「逆天改命」與身份認同的掙扎。

3.  **世界觀設定：東方奇幻遇上逆流異界 (Cultural Clash & Order Disturbance)**
    *   **基底世界：** 融合**三國歷史背景、武俠江湖文化、東方傳統精怪志怪傳說**。提供熟悉的文化語境。
    *   **核心變數：「逆流河」：** 作為**維度裂隙/時空亂流**，是連接不同世界（特別是引入西式奇幻元素）的關鍵機制與地理要素。
    *   **元素融合與衝擊：** 來自「逆流河」的**西式D&D設定**（狗頭人、蜥蜴人、龍、更高維度生命等）作為**「入侵/滲透」**元素，造成文化衝擊、秩序擾動，並帶來新的威脅與機遇。
    *   **更高維度生命：** 暗示宇宙的複雜性，可能關聯「命運」本源，是潛在的終極威脅或知識源。

4.  **敘事基調與風格：嬉笑怒罵間的宿命掙扎 (Tone Contrast & Genre Blend)**
    *   **表層風格（銀魂式）：** 大量運用**日常喜劇、無厘頭橋段、誇張互動、戲仿**，營造輕鬆甚至荒誕的氛圍。
    *   **深層內核：** 在搞笑之下潛藏**嚴肅的、關於「命運」、「犧牲」、「抉擇」的深刻探討**。巨大的風格反差強化了嚴肅主題的衝擊力。
    *   **風格融合：** 將江湖、三國、神怪、異界奇幻、日常喜劇、嚴肅哲思等多樣元素交織呈現。

5.  **普遍存在的「表裡真實」 (Ubiquitous Duality: Surface vs. Reality)**
    *   **核心認知規則：** 任何事物（人、地、物、事、傳說）都可能存在**被掩蓋的「裡層」真實**。表象往往具有欺騙性或僅是部分真相。
    *   **驅動探索與懷疑：** 鼓勵玩家不輕信表面，深入調查，挖掘真相。理解「裡層」是做出明智抉擇和成功「逆天改命」的關鍵。
    *   **增加複雜性：** 避免簡單二元論，使角色動機、事件發展更加立體和耐人尋味。

### **第二層：中層設計 - 敘事原型/架構與核心體驗 (Narrative Archetypes/Structure & Core Experience)**

此層級定義了具體故事（下層）的組織方式、呈現手法，以及期望玩家獲得的核心感受。

1.  **核心敘事架構原型 (參考無名村模式)：**
    *   **階段一：表層探索 (Surface Exploration & Foreshadowing)**
        *   以看似簡單/務實的目標切入。
        *   通過互動、任務、環境細節，大量植入伏筆與怪異感，營造氛圍。
        *   玩家收集線索，建立關係，感受潛藏的「不對勁」。
    *   **階段二：深層揭秘 (Deep Revelation & Truth Unveiling)**
        *   引導玩家接觸核心衝突與秘密。
        *   揭示「表裡真實」，展現不同層面的信息（如假壁畫 vs. 真壁畫）。
        *   強調角色行為背後的認知基礎（他們「認為」的正確）。
    *   **階段三：抉擇時刻 (Moment of Choice & Consequence)**
        *   在了解（或自認了解）表裡之後，玩家面臨關鍵抉擇。
        *   選擇直接挑戰「宿命軌跡」，玩家行動將導致不同的後果。
        *   重點在於玩家**以自身意志介入**，創造不同可能性並承擔結果，而非追求單一「好結局」。

2.  **核心體驗要素：**
    *   **氛圍營造：** 結合環境描述、音樂、NPC行為等，營造獨特的（如無名村的詭異、壓抑）氛圍。
    *   **探索與發現的樂趣：** 通過「表裡真實」設計，鼓勵玩家探索並獎勵發現真相的行為。
    *   **抉擇的重量感：** 強調選擇與「逆天改命」主題的關聯，讓玩家感受到抉擇帶來的實際影響和所需付出的代價。
    *   **角色代入感：** 通過主角的「饕餮命局」掙扎，以及與其他受困於自身認知的NPC互動，加強玩家的情感代入。

### **第三層：下層設計 - 具體劇情與實現細節 (Specific Plot & Implementation Details)**

此層級是上兩層概念的具體實現，是玩家直接互動的內容。**`初出茅廬.md` 腳本是本層級設計的標準參考範例。**

1.  **內容範疇：**
    *   **具體腳本：** 如 `初出茅廬.md`、`@地點/無名村.md` 中的詳細流程。
    *   **NPC與對白：** 每個角色的具體台詞、背景故事、性格表現。
    *   **任務設計：** 主線與支線任務的具體目標、流程、獎勵。
    *   **場景與環境互動：** 可調查的物品、場景描述、特殊互動點（如棋局、釣魚點）。
    *   **小遊戲與機制：** 如釣魚、解謎、口才檢定等具體玩法。
    *   **物品與道具：** 如棋譜殘頁、龜涎石、黑石子等具有劇情意義的物品。

2.  **實現原則（以 `初出茅廬.md` 為例）：**
    *   **一致性：** 所有下層細節必須符合上層世界觀、哲學和中層敘事架構。
    *   **服務主題：** 具體設計應服務於「逆天改命」、「表裡真實」等核心主題。例如，無名村的各個任務和細節都指向村莊的詭異氛圍和對「河神」的過度關注，鋪墊後續的「河伯娶親」核心衝突。
    *   **細節豐富度：** 提供足夠的細節來支撐世界觀，營造氛圍，並埋下伏筆（如：甜膩的香味、奇怪的餌料、村民的眼神、小花的布娃娃等）。
    *   **互動性與連貫性：**
        *   **NPC任務互聯：** 設計不同NPC任務之間的邏輯關聯，使箱庭探索更具整體感（例如：完成郎中任務需要從學究處獲取信息/道具）。
        *   **結構化對話狀態與玩家選項：** NPC對話應根據任務狀態清晰劃分。玩家的對話選項應設計得簡潔扼要，清晰傳達選擇的核心意圖。在玩家做出選擇後，若劇情設計主角（或其他角色）會依此選項發言，則該角色的實際對白應為符合其性格和當前情境的完整語句，可以是對選項的自然展開或補充，而非單純重複選項文字。主角的發言應確保符合其「饕餮命局」掙扎的核心設定，以及當前情境下的合理反應。
        *   **環境敘事：** 利用環境描述、可互動對象（如棋盤、釣竿）來傳遞信息和觸發事件。
    *   **箱庭主題表達：** 每個獨立的箱庭地圖（如無名村）應有其想要表達的核心氛圍或主題，並通過其中的NPC、任務、環境細節共同塑造。

#### 2.1. 對話角色位置與 [panel] 指令指南

本節旨在說明如何在遊戲劇情文本中，使用 `[panel=X]` 指令來控制角色立繪的顯示位置以及旁白的位置。正確地使用此指令有助於 AI 理解並創作符合預期場景的對話。

##### 角色與旁白位置代號

根據提供的示意圖，各個位置代號的定義如下：

*   **位置 0:** 主角 (MC) 的固定位置。
*   **位置 1:** 預設的 NPC 對話位置。
*   **位置 2:** 其他 NPC 對話位置。
*   **位置 3:** 其他 NPC 對話位置。
*   **位置 4:** 其他 NPC 對話位置。
*   **位置 6:** 旁白或系統訊息的顯示位置。 (原指南中此處為位置5，現更正為位置6以符合`[PANEL=6]`的實際使用)

##### `[panel=X]` 指令使用規則

`[panel=X]` 指令應放置在對話文本或旁白描述的**最前方**，其中 `X` 代表目標位置的數字代號。

###### 1. 主角 (位置 0)
*   主角的對話**不需要**使用 `[panel=0]` 指令。系統會自動將主角的立繪顯示在位置 0。
    *   例如：`燕不凡: 「這便是無名村嗎？」`

###### 2. 旁白 (位置 6)
*   所有的「旁白」或系統訊息，都**必須**使用 `[PANEL=6]` 指令。
    *   例如：`旁白: [PANEL=6]＊（村口茶攤炊煙裊裊，幾個老者正在閒聊。）＊`
    *   例如：`[PANEL=6]＊（你注意到老伯在說出價格時，眼神似乎閃爍了一下。）＊` (此處假設該行本身就是一個獨立的旁白行)

###### 3. 單一 NPC 對話 (預設位置 1)
*   當場景中只有主角和一位 NPC 對話時，該 NPC 的對話通常會顯示在**位置 1**。
*   在這種情況下，**可以省略** NPC 對話前的 `[panel=1]` 指令，系統會預設將其置於位置 1。
    *   例如：`茶攤老伯: 「客官，要來碗熱茶嗎？」` (老伯會自動出現在位置 1)

###### 4. 多名 NPC 同時對話 (指定位置 1, 2, 3, 4...)
*   當場景中有多名 NPC 需要同時出現並參與對話時（例如，主角與 NPC A 和 NPC B 對話），則需要明確指定各 NPC 的位置。
*   該對話情境中**第一位發言的NPC**（非主角）會出現在**位置 1** (可省略 `[panel=1]`)。
*   其他 NPC 則應使用 `[panel=2]`, `[panel=3]`, `[panel=4]` 等指令來指定其位置。該指令應加在該 NPC **每一句對話之前**，以確保其立繪出現在正確的位置。
*   **重要規則：旁白不影響NPC panel編號**：旁白（使用 `[PANEL=6]`）不計入 NPC 發言的順序。也就是說，即使場景中穿插了旁白，下一位 NPC 的 panel 編號仍然會按照之前 NPC 的順序遞增（例如，若前一位NPC是`[panel=1]`，即使中間有旁白，下一位新的NPC發言時應為`[panel=2]`）。

    *   **情境範例1 (無旁白干擾)：** 主角 (0)、茶攤老伯 (作為第一個發言的NPC，位置 1)、村長 (作為第二個發言的NPC，位置 2)
        ```
        燕不凡: 「請問兩位老丈，這村子可有什麼異事？」
        茶攤老伯: [panel=1]「異事？老婆子我只知道每日賣茶。」 // 第一個發言NPC，位置1
        村長: [panel=2]「年輕人，有些事還是不知道為妙。」 // 第二個發言NPC，位置2
        燕不凡: 「老伯此言何意？」
        村長: [panel=2]「天機不可洩漏啊。」
        茶攤老伯: [panel=1]「呵呵，你就別為難村長了。」
        ```
    *   **情境範例2 (旁白不影響NPC panel編號)：**
        ```
        旁白: [PANEL=6]＊（一陣微風吹過，帶來遠處的花香。）＊
        燕不凡: 「請問村長，這附近可有什麼去處？」
        村長: [panel=1]「年輕人，此地名為忘憂谷，倒是有些奇特的景緻。」 // 村長是第一位發言的NPC，位置1
        旁白: [PANEL=6]＊（村長指向東邊的山巒。）＊
        蕭靈犀: [panel=2]「表哥，我們去看看吧！」 // 蕭靈犀是第二位發言的NPC，位置2，不受中間旁白影響
        村長: [panel=1]「注意安全便是。」
        ```
*   **重要注意事項**:
    *   當某位 NPC 開始在指定位置 (如 `[panel=2]`) 發言後，後續其對話也需要持續標註 `[panel=2]`，除非其位置發生了變化或不再發言。
    *   如果沒有指定 `[panel=X]`，非主角的發言者會預設嘗試出現在位置 1。如果位置 1 已被佔用或不適用於當前情境，可能會導致顯示混亂。

##### 注意事項
*   `[panel=X]` 指令僅用於控制立繪顯示位置或旁白框位置，不影響對話內容本身。
*   確保 `X` 的值是有效的，目前已知有效值為 0 至 4（用於NPC）及 6（用於旁白）。
*   在創作複雜的多人對話場景時，請仔細規劃每個角色的位置，並正確使用 `[panel=X]` 指令。
*   **主角的對話永遠不需要加 `[panel]` 標籤。**
*   **旁白/系統訊息固定使用 `[PANEL=6]`。**

##### 範例回顧

*   **旁白:**
    `旁白: [PANEL=6]＊（你注意到老伯在說出價格時，眼神似乎閃爍了一下，嘴角有著一絲不易察覺的弧度，似乎這價格並非表面那般簡單。）＊`

*   **多NPC對話 (含旁白不影響計數規則):**
    假設主角 (0)。

    ```
    旁白: [PANEL=6]＊（陽光正好，市集上人來人往。）＊
    燕不凡: 「情況如何？」
    蕭靈犀: 「看起來不妙。」 // 第一位發言的NPC，預設位置1
    茶攤老伯: [panel=2]「客官，這價格已經很公道了。」 // 第二位發言的NPC
    旁白: [PANEL=6]＊（蕭靈犀皺了皺眉頭。）＊
    村長: [panel=3]「沒錯，老伯說的是實話。」 // 第三位發言的NPC，panel順序不受旁白影響
    蕭靈犀: [panel=1]「我們再看看別家的吧。」 // 蕭靈犀回到位置1發言
    ```

### **AI 劇情創作指導原則**

AI 在進行劇情創作時，必須遵循以下原則：

1.  **層級意識：** 理解並區分上、中、下三個層級，確保創作內容在各層級上保持一致。
2.  **緊扣核心：** 所有劇情設計必須圍繞「命定論 vs. 命未定論」的核心哲學衝突展開，探討「逆天改命」的可能性與代價。
3.  **主角中心：** 劇情應與主角的「饕餮命局」及其轉化之路相關聯，提供讓玩家體現這種掙扎與選擇的機會。
4.  **世界觀融合：** 合理運用「逆流河」機制引入異界元素，展現文化碰撞與秩序擾動，但不能脫離東方奇幻的基底。
5.  **風格把控：** 維持「銀魂式」的表層幽默與深層嚴肅的基調反差。
6.  **貫徹「表裡真實」：** 在人物塑造、地點設計、事件編排中普遍應用「表裡真實」原則，鼓勵玩家探索與質疑。
7.  **遵循敘事架構：** 主要故事線或重要支線應參考中層的「探索 → 揭秘 → 抉擇」結構原型。
8.  **體現抉擇價值：** 設計有意義的玩家抉擇，其後果應能實際影響劇情走向、角色關係或世界狀態，並與「逆天改命」的代價掛鉤。
9.  **細節落地：** 確保所有上層和中層的概念，最終都通過具體、可信的下層細節（對話、任務、環境等）呈現給玩家。**應主動參考 `初出茅廬.md` 的實現方式。**

---

**版本記錄：** V1.0 - 初始版本，根據早期討論整理。V1.1 - 強化下層設計原則，明確以 `初出茅廬.md` 為參考範例。

**後續修訂：** 本文件將根據遊戲開發的進展和設計的深入進行持續修訂與補充。

## 主角姓名變數使用規則

為了在遊戲對話或旁白中動態顯示玩家自訂的主角姓名，請使用以下變數格式：

-   主角的姓氏：`[var=PlayerLastName]`
-   主角的名字：`[var=PlayerFirstName]`

**使用時機：**

當劇情文本（包括角色對白、旁白、選項文字等）需要稱呼主角的姓、名或全名時，直接在文本中嵌入對應的變數即可。遊戲系統會在實際顯示時將這些變數替換為玩家在創建角色時設定的內容。

**範例：**

*   **NPC 對白：**
    *   「[var=PlayerLastName]兄弟，別來無恙？」
    *   「[var=PlayerFirstName]，此事你怎麼看？」
    *   「哎呀，這不是[var=PlayerLastName][var=PlayerFirstName]大俠嗎！」 (姓和名連用)
*   **旁白：**
    *   ＊（[var=PlayerFirstName]心想，此事必有蹊蹺。）＊
    *   ＊（村民們都感激[var=PlayerLastName]大俠的義舉。）＊
*   **蕭靈犀對主角的稱呼（根據你們的設定習慣）：**
    *   如果您希望蕭靈犀固定稱呼主角為「表哥」，則直接寫「表哥」。
    *   如果希望根據玩家姓名變化，可以寫：「[var=PlayerLastName]表哥，我們快走吧！」或「[var=PlayerFirstName]表哥，你沒事吧？」

**注意事項：**
*   盡量不要在對話中出現主角的名子。
*   請確保在十分需要引用主角姓名的地方都使用這些標準變數，以保證遊戲內文本的正確動態顯示。
*   在撰寫涉及到主角稱呼的文本時，可以根據語境選擇使用姓、名，或將兩者組合。 