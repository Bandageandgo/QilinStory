# 對話角色位置與 `[panel]` 指令指南

本指南旨在說明如何在遊戲劇情文本中，使用 `[panel=X]` 指令來控制角色立繪的顯示位置以及旁白的位置。正確地使用此指令有助於 AI 理解並創作符合預期場景的對話。

## 角色與旁白位置代號

根據提供的示意圖，各個位置代號的定義如下：

*   **位置 0:** 主角 (MC) 的固定位置。
*   **位置 1:** 預設的 NPC 對話位置。
*   **位置 2:** 其他 NPC 對話位置。
*   **位置 3:** 其他 NPC 對話位置。
*   **位置 4:** 其他 NPC 對話位置。
*   **位置 5:** 旁白或系統訊息的顯示位置。

## `[panel=X]` 指令使用規則

`[panel=X]` 指令應放置在對話文本或旁白描述的**最前方**，其中 `X` 代表目標位置的數字代號。

### 1. 主角 (位置 0)
*   主角的對話**不需要**使用 `[panel=0]` 指令。系統會自動將主角的立繪顯示在位置 0。
    *   例如：`燕不凡: 「這便是無名村嗎？」`

### 2. 旁白 (位置 5)
*   所有的「旁白」或系統訊息，都**必須**使用 `[panel=5]` 指令。
    *   例如：`旁白: [panel=5]＊（村口茶攤炊煙裊裊，幾個老者正在閒聊。）＊`
    *   例如：`[panel=5]＊（你注意到老伯在說出價格時，眼神似乎閃爍了一下。）＊` (此處假設該行本身就是一個獨立的旁白行)

### 3. 單一 NPC 對話 (預設位置 1)
*   當場景中只有主角和一位 NPC 對話時，該 NPC 的對話通常會顯示在**位置 1**。
*   在這種情況下，**可以省略** NPC 對話前的 `[panel=1]` 指令，系統會預設將其置於位置 1。
    *   例如：`茶攤老伯: 「客官，要來碗熱茶嗎？」` (老伯會自動出現在位置 1)

### 4. 多名 NPC 同時對話 (指定位置 1, 2, 3, 4...)
*   當場景中有多名 NPC 需要同時出現並參與對話時（例如，主角與 NPC A 和 NPC B 對話），則需要明確指定各 NPC 的位置。
*   該對話情境中**第一位發言的NPC**（非主角）會出現在**位置 1** (可省略 `[panel=1]`)。
*   其他 NPC 則應使用 `[panel=2]`, `[panel=3]`, `[panel=4]` 等指令來指定其位置。該指令應加在該 NPC **每一句對話之前**，以確保其立繪出現在正確的位置。

    *   **情境範例：** 主角 (0)、茶攤老伯 (作為第一個發言的NPC，位置 1)、村長 (作為第二個發言的NPC，位置 2)
        ```
        燕不凡: 「請問兩位老丈，這村子可有什麼異事？」
        茶攤老伯: [panel=1]「異事？老婆子我只知道每日賣茶。」 // 第一個發言NPC，位置1
        村長: [panel=2]「年輕人，有些事還是不知道為妙。」 // 第二個發言NPC，位置2
        燕不凡: 「老伯此言何意？」
        村長: [panel=2]「天機不可洩漏啊。」
        茶攤老伯: [panel=1]「呵呵，你就別為難村長了。」
        ```
*   **重要**:
    *   當某位 NPC 開始在指定位置 (如 `[panel=2]`) 發言後，後續其對話也需要持續標註 `[panel=2]`，除非其位置發生了變化或不再發言。
    *   如果沒有指定 `[panel=X]`，非主角的發言者會預設嘗試出現在位置 1。如果位置 1 已被佔用或不適用於當前情境，可能會導致顯示混亂。

## 注意事項
*   `[panel=X]` 指令僅用於控制立繪顯示位置或旁白框位置，不影響對話內容本身。
*   確保 `X` 的值是有效的，目前已知有效值為 0 至 5。
*   在創作複雜的多人對話場景時，請仔細規劃每個角色的位置，並正確使用 `[panel=X]` 指令。
*   **主角的對話永遠不需要加 `[panel]` 標籤。**
*   **旁白/系統訊息固定使用 `[panel=5]`。**

## 範例回顧

*   **旁白:**
    `旁白: [panel=5]＊（你注意到老伯在說出價格時，眼神似乎閃爍了一下，嘴角有著一絲不易察覺的弧度，似乎這價格並非表面那般簡單。）＊`

*   **多NPC對話:**
    假設主角 (0)。在此範例情境中，蕭靈犀是第一個發言的 NPC，因此她佔據位置1 (可省略 `[panel=1]`)。茶攤老伯是接著發言的第二位 NPC，因此指定為 `[panel=2]`。村長是第三位發言的 NPC，指定為 `[panel=3]`。

    ```
    燕不凡: 「情況如何？」
    蕭靈犀: 「看起來不妙。」 // 第一位發言的NPC，預設位置1
    茶攤老伯: [panel=2]「客官，這價格已經很公道了。」 // 第二位發言的NPC
    村長: [panel=3]「沒錯，老伯說的是實話。」 // 第三位發言的NPC
    ``` 